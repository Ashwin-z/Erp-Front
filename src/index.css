/* Vuexy-inspired React invoice page (light & dark with purple accent) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

/* ---------- Tokens ---------- */
:root{
  --bg:#0f1220;
  --panel:#111827;
  --muted:#9fb3c8;
  --text:#e8eef7;
  --line:rgba(255,255,255,.12);
  --shadow:0 12px 32px rgba(0,0,0,.45);
  --purple:#8b7dfc;
  --purple-ink:#0b0f1a;
  --green:#22c55e;
  --amber:#fbbf24;
  --red:#f87171;
  --radius:14px;
  --sticky-offset: 72px;

  --field-bg:#101826;
  --field-text:var(--text);
  --field-line:var(--line);
  --field-hover:#0f1a2a;
  --field-focus-ring: rgba(139,125,252,.35);
}
[data-theme="light"]{
  --bg:#f6f7fb;
  --panel:#ffffff;
  --muted:#6b7280;
  --text:#0f172a;
  --line:#e6e7ee;
  --shadow:0 10px 30px rgba(17, 24, 39, .08);
  --purple:#7367f0;
  --purple-ink:#fff;

  --field-bg:#fff;
  --field-text:var(--text);
  --field-line:var(--line);
  --field-hover:#f4f5fb;
  --field-focus-ring: rgba(115,103,240,.25);
}

*{box-sizing:border-box}
html,body,#root{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto
}
a{color:var(--purple);text-decoration:none}
.muted{color:var(--muted)}

/* ===== Shell ===== */
.vuexy-shell{display:grid;grid-template-columns:260px 1fr;min-height:100%}

/* ===== Sidebar ===== */
.vuexy-sidebar{background:var(--panel);border-right:1px solid var(--line);display:flex;flex-direction:column}
.brand{display:flex;align-items:center;gap:10px;padding:16px 18px;border-bottom:1px solid var(--line)}
.brand-icon{width:28px;height:28px;border-radius:8px;object-fit:contain;background:#f2f3ff;display:block;flex:0 0 auto}
[data-theme="dark"] .brand-icon{background:#1b2030}
.brand-wordmark{display:flex;align-items:center;gap:8px;line-height:1}
.brand-wordmark.tight{gap:8px}
.brand-wordmark .merrix{
  font-weight:800; letter-spacing:.3px;
  background: linear-gradient(90deg, #8b7dfc 0%, #6ad2ff 50%, #7cf29a 100%);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}
.brand-wordmark .erp{
  font-weight:800; letter-spacing:.5px; font-size:11px;
  padding:3px 8px; border-radius:999px;
  background: var(--purple); color:#fff;
  border:1px solid color-mix(in oklab, var(--purple) 70%, #000 30%);
  box-shadow: 0 1px 0 rgba(0,0,0,.06) inset;
}
.vuexy-sidebar .brand-wordmark .merrix{ font-size:16px; }

.s-nav{padding:8px}
.s-section{padding:10px 12px;color:var(--muted);font-size:12px}
.s-link{
  display:flex;align-items:center;gap:10px;
  padding:10px 12px;border-radius:10px;color:var(--text);
  border:1px solid transparent;background:transparent;cursor:pointer
}
.s-link:hover{background:color-mix(in oklab, var(--purple) 8%, transparent)}
.s-link.ghost{color:var(--muted)}

/* ===== Main / Topbar ===== */
.vuexy-main{min-height:100%;display:flex;flex-direction:column}
.vuexy-topbar{
  position:sticky;top:0;z-index:20;
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:14px 18px;background:var(--panel);border-bottom:1px solid var(--line)
}
.search-wrap{position:relative;min-width:420px}
.search-wrap svg{position:absolute;top:10px;left:12px;color:#94a3b8}
[data-theme="dark"] .search-wrap svg{color:#6b7a90}
.search-input{
  width:100%;padding:10px 12px 10px 38px;
  background:var(--field-bg);color:var(--field-text);
  border:1px solid var(--field-line);border-radius:10px
}
.search-input:focus{outline:none;box-shadow:0 0 0 3px var(--field-focus-ring)}
.top-actions{display:flex;align-items:center;gap:10px}
.icon-btn{
  background:var(--panel);border:1px solid var(--line);color:var(--text);
  border-radius:10px;padding:8px;cursor:pointer
}
.icon-btn.sm{padding:6px}
.avatar{width:34px;height:34px;border-radius:50%;background:#e5e7eb;display:grid;place-items:center;font-weight:700;color:#374151}
[data-theme="dark"] .avatar{background:#1b2533;color:#cbd5e1}
.avatar.sm{width:28px;height:28px}

/* ===== Page ===== */
.page{padding:18px;display:grid;gap:14px}

/* Page brand header */
.page-brand{
  display:flex;align-items:center;gap:12px;
  padding:12px 14px;background:var(--panel);border:1px solid var(--line);
  border-radius:var(--radius);box-shadow:var(--shadow)
}
.brand-icon-lg{width:36px;height:36px;border-radius:10px;object-fit:contain;background:#f2f3ff;display:block;flex:0 0 auto}
[data-theme="dark"] .brand-icon-lg{background:#1b2030}
.brand-copy .brand-sub{font-size:12px}
.page-brand .brand-wordmark .merrix{font-size:18px}

/* KPI */
.kpi-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:14px}
.card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow)}
.kpi{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:12px;padding:14px 16px}
.kpi-icon{width:42px;height:42px;border-radius:12px;background:#f4f3ff;color:var(--purple);display:grid;place-items:center}
[data-theme="dark"] .kpi-icon{background:#181f33}
.kpi-val{font-size:20px;font-weight:800}
.kpi-label{color:var(--muted);font-size:12px}

/* Toolbar */
.toolbar{display:flex;align-items:center;justify-content:space-between;padding:12px 14px}
.toolbar .left, .toolbar .right{display:flex;align-items:center;gap:10px}
.show-select{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:10px;background:var(--panel);border:1px solid var(--line)}
.input{
  background:var(--field-bg);color:var(--field-text);
  border:1px solid var(--field-line);
  padding:10px 12px;border-radius:10px;min-width:240px
}
.input:focus{outline:none;box-shadow:0 0 0 3px var(--field-focus-ring)}
.btn{
  background:color-mix(in oklab, var(--panel) 92%, black);
  border:1px solid var(--line);
  padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;color:var(--text)
}
.btn.primary{background:var(--purple);border-color:var(--purple);color:var(--purple-ink);display:flex;align-items:center;gap:8px}

/* ===== Table ===== */
.table{overflow:visible;position:relative}

/* Fixed narrow ID column (160px) */
.t-head,.t-row{
  display:grid;
  grid-template-columns:44px 160px 1.2fr 3fr 1.2fr 1.4fr 1.2fr 1.2fr;
  align-items:center;gap:12px
}

.t-head{
  position:sticky; top:var(--sticky-offset); z-index:3;
  padding:12px 14px;background:var(--panel);
  color:var(--muted);font-size:12px;border-bottom:1px solid var(--line);
  box-shadow:0 1px 0 rgba(2,6,23,.04);
}
.t-row{padding:12px 14px;border-bottom:1px solid var(--line);background:var(--panel)}
.t-row:hover{background:color-mix(in oklab, var(--panel) 96%, black)}
.t-row:first-of-type{scroll-margin-top:calc(var(--sticky-offset) + 8px)}

.th,.td{min-width:0}
.center{text-align:center}
.right{text-align:right}

/* ID link smaller + truncate */
.t-row .td.id{max-width:160px;overflow:hidden}
.t-row .td.id .id-code{
  display:inline-block;max-width:140px;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size:12px;font-weight:800;color:var(--purple);
}

/* Client cell */
.client{display:flex;align-items:center;gap:10px}
.client .avatar{width:36px;height:36px;border:2px solid var(--panel);box-shadow:0 1px 2px rgba(17,24,39,.12)}
[data-theme="dark"] .client .avatar{box-shadow:none}
.who .name{font-weight:700}
/* removed .who .role */

/* Actions */
.actions{display:flex;justify-content:center;gap:6px}

/* Badges */
.badge{
  display:inline-flex;align-items:center;gap:6px;
  border-radius:999px;padding:6px 10px;font-size:12px;
  border:1px solid var(--line);background:#f8fafc;color:var(--text)
}
[data-theme="dark"] .badge{background:#162030;border-color:#223048;color:#cfe2ff}
.badge.paid{background:#ecfdf5;border-color:rgba(34,197,94,.35);color:#065f46}
[data-theme="dark"] .badge.paid{background:#0e1a14;color:#7cf29a;border-color:#214e31}
.badge.warning{background:#fffbeb;border-color:rgba(245,158,11,.35);color:#92400e}
[data-theme="dark"] .badge.warning{background:#2a1f0c;color:#ffd47a;border-color:#5a430f}
.badge.unpaid{background:#fef2f2;border-color:rgba(239,68,68,.35);color:#7f1d1d}
.badge.draft{background:#fefce8;border-color:rgba(234,179,8,.35);color:#713f12}
.badge.overdue{background:#fef2f2;border-color:rgba(239,68,68,.35);color:#7f1d1d}

/* Table Foot / Pager */
.t-foot{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;background:var(--panel)}
.pager{display:flex;align-items:center;gap:8px}
.page-btn{width:36px;height:36px;border-radius:10px;border:1px solid var(--line);background:var(--panel);cursor:pointer;color:var(--text)}
.page-btn:disabled{opacity:.5;cursor:not-allowed}
.page-num{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;background:var(--purple);color:#fff;font-weight:700}

/* Dropdown (unchanged) */
.dd{position:relative;min-width:200px}
.dd.w-220{min-width:220px}
.dd.w-90{min-width:90px}
.dd.right .dd-menu{left:auto;right:0}
.dd-trigger{width:100%;text-align:left;background:var(--field-bg);color:var(--field-text);border:1px solid var(--field-line);border-radius:10px;padding:10px 36px 10px 12px;display:flex;align-items:center;gap:8px;cursor:pointer;transition:background .15s,border-color .15s,box-shadow .15s}
.dd-trigger:hover{background:var(--field-hover)}
.dd-trigger:focus-visible{outline:none;box-shadow:0 0 0 3px var(--field-focus-ring)}
.dd-trigger .value.muted{color:var(--muted)}
.dd-chevron{position:absolute;right:12px;color:#9aa4b2;pointer-events:none}
[data-theme="dark"] .dd-chevron{color:#7c8aa3}
.dd-menu{position:absolute;top:calc(100% + 6px);left:0;right:0;background:var(--panel);border:1px solid var(--line);border-radius:12px;box-shadow:var(--shadow);padding:6px;z-index:30;max-height:260px;overflow:auto}
.dd-option{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:8px;cursor:pointer;user-select:none;color:var(--text)}
.dd-option:hover,.dd-option.active{background:color-mix(in oklab, var(--purple) 10%, transparent)}
.dd-option.selected{background:color-mix(in oklab, var(--purple) 16%, transparent)}
.dd-check{width:16px;height:16px;color:var(--purple);visibility:hidden}
.dd-option.selected .dd-check{visibility:visible}
.dd.sm .dd-trigger{padding:8px 30px 8px 10px;font-size:13px}
.dd.sm .dd-menu{min-width:140px}

/* ===== Responsive ===== */
@media (max-width:1100px){
  .kpi-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .t-head,.t-row{
    grid-template-columns:44px 140px 1.2fr 2.2fr 1.2fr 1.4fr 1.2fr 1.2fr;
  }
  .search-wrap{min-width:320px}
}
@media (max-width:820px){
  .vuexy-shell{grid-template-columns:70px 1fr}
  .brand-wordmark .merrix{display:none}
  .brand-wordmark .erp{display:none}
  .s-link span{display:none}
  .s-section{display:none}

  .kpi-grid{grid-template-columns:1fr}
  .search-wrap{min-width:220px}

  /* hide Balance + Actions; keep fixed ID width */
  .t-head,.t-row{grid-template-columns:44px 130px 1.6fr 2fr 1.2fr 1.4fr}
  .t-head .th:nth-last-child(-n+2),
  .t-row .td:nth-last-child(-n+2){display:none}
}

/* --- Create Invoice page helpers (SCOPED) --- */
.create-invoice { max-width: 1100px; width: 100%; margin: 0 auto; gap: 16px; }
.create-invoice .card { border-radius: 16px; box-shadow: var(--shadow); }
.create-invoice .title-bar {
  padding: 12px 16px; display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.create-invoice .title-bar .btn { min-width: 120px; }

.create-invoice .lbl { display:block; margin:0 0 6px; color:var(--muted); font-size:12px; font-weight:600 }
.create-invoice .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.create-invoice .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.create-invoice .flags{display:flex;gap:16px;flex-wrap:wrap}
.create-invoice .flag{display:flex;gap:8px;align-items:center;color:var(--text)}
.create-invoice .section-title{font-weight:800;font-size:15px; letter-spacing:.02em}
.create-invoice .big{font-weight:800;font-size:18px}

.create-invoice .input{ background:var(--field-bg); color:var(--field-text); border:1px solid var(--field-line); border-radius:12px; padding:10px 12px; }
.create-invoice .input:focus{ outline:none; box-shadow:0 0 0 3px var(--field-focus-ring) }

/* Combobox / dropdown (scoped) */
.create-invoice .combo{position:relative}
.create-invoice .combo-pop{
  position:absolute;left:0;right:0;top:calc(100% + 6px);
  background: var(--panel); border:1px solid var(--line); border-radius: 12px; box-shadow: var(--shadow);
  max-height:280px; overflow:auto; z-index: 50;
}
.create-invoice .combo-opt{padding:10px 12px;cursor:pointer;display:flex;flex-direction:column;gap:4px;border-radius:8px}
.create-invoice .combo-opt:hover{background: color-mix(in oklab, var(--purple) 10%, transparent)}
.create-invoice .opt-title{font-weight:700}
.create-invoice .opt-sub{font-size:12px;color:var(--muted)}

/* Create page table (softer, card-like rows) */
.create-invoice .si-table{width:100%;border-collapse:separate;border-spacing:0 10px}
.create-invoice .si-table thead th{
  color:var(--muted);font-size:12px;
  background:var(--panel); border-bottom:1px solid var(--line); padding:10px 12px;
}
.create-invoice .si-table tbody tr{
  background:var(--panel); border:1px solid var(--line);
  border-radius:12px; overflow:hidden;
}
.create-invoice .si-table td{ padding:10px 12px; border-bottom:0; }
.create-invoice .si-table .col-amt{text-align:right;font-weight:800}
.create-invoice .si-table .col-act{text-align:right}

/* Buttons (slightly softer for this page) */
.create-invoice .btn{ border-radius:12px; }
.create-invoice .btn.primary{
  background: linear-gradient(180deg, color-mix(in oklab, var(--purple) 20%, transparent) 0%, color-mix(in oklab, var(--purple) 28%, transparent) 100%);
  border-color: color-mix(in oklab, var(--purple) 56%, transparent);
  color:#fff;
}

/* Tiny utils */
.mt4{margin-top:4px}.mt8{margin-top:8px}

/* keep your earlier generic helpers for non-create pages */
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.lbl{display:block;margin:0 0 6px;color:var(--muted);font-size:12px}
.flags{display:flex;gap:16px;flex-wrap:wrap}
.flag{display:flex;gap:8px;align-items:center;color:var(--text)}
.section-title{font-weight:800;font-size:16px}
.big{font-weight:800;font-size:18px}

.combo{position:relative}
.combo-pop{position:absolute;left:0;right:0;top:calc(100% + 6px);background:var(--panel);border:1px solid var(--line);border-radius:10px;box-shadow:var(--shadow);max-height:260px;overflow:auto;z-index:50}
.combo-opt{padding:8px 10px;cursor:pointer}
.combo-opt:hover{background:color-mix(in oklab,var(--purple) 12%,transparent)}
.opt-title{font-weight:700}
.opt-sub{font-size:12px;color:var(--muted)}

/* simple table for create page (fallback for non-scoped usage) */
.si-table{width:100%;border-collapse:separate;border-spacing:0 8px}
.si-table th,.si-table td{padding:8px 10px;border-bottom:1px solid var(--line)}
.si-table thead th{color:var(--muted);font-size:12px;border-bottom:1px solid var(--line)}
.si-table tbody tr{background:var(--panel)}
.si-table .col-amt{text-align:right;font-weight:800}





/* Action icons */
.icon-btn.view { border-color: var(--line); }
.icon-btn.view:hover { background: color-mix(in oklab, var(--purple) 10%, transparent); }

.icon-btn.danger {
  border-color: color-mix(in oklab, var(--red) 40%, var(--line));
}
.icon-btn.danger:hover {
  background: color-mix(in oklab, var(--red) 14%, transparent);
  color: var(--red);
}

/* Title bar card */
.card.title-bar {
  padding: 12px;
  display: flex;
  gap: 8px;
  justify-content: space-between;
  align-items: center;
}

/* Keep dd-menu nice when used as actions menu in toolbar */
.toolbar .dd-menu {
  min-width: 200px;
}


/* ---------- Wider table columns (less cramped) ---------- */
.t-head.wide-cols, .t-row.wide-cols{
  /* checkbox | id | client | status | total | date | balance | actions */
  grid-template-columns: 44px 190px 2.2fr 1.1fr 1.2fr 1.3fr 1.2fr 1fr;
  gap: 16px; /* a bit more breathing space */
}
.client.roomy { gap: 12px; }

/* ---------- Actions flyout (always inside the screen) ---------- */
.menu-flyout{
  position: absolute;
  top: 110%;
  right: 0;          /* anchor to the right of toolbar */
  left: auto !important;
  min-width: 220px;
  max-width: 260px;
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 12px;
  box-shadow: var(--shadow);
  padding: 6px;
  z-index: 40;
}
.menu-flyout.left{ right: 0; } /* explicit; opens leftwards from the button */
.toolbar{ overflow: visible; }  /* ensure the flyout isn't clipped */

/* ---------- Modal ---------- */
.modal-backdrop{
  position: fixed; inset: 0;
  background: rgba(2,6,23,.55); backdrop-filter: blur(2px);
  display: grid; place-items: center; z-index: 50;
}
.modal{
  width: min(560px, 92vw);
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 14px;
  box-shadow: var(--shadow);
  overflow: hidden;
}
.modal-head{
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 14px; border-bottom:1px solid var(--line);
}
.modal-title{ font-weight:800; font-size:16px; }
.modal-body{ padding: 14px; }
.modal-foot{
  display:flex; gap:8px; justify-content:flex-end;
  padding: 12px 14px; border-top:1px solid var(--line);
}
.btn.danger{
  background: color-mix(in oklab, var(--red) 26%, var(--panel));
  border-color: color-mix(in oklab, var(--red) 40%, var(--line));
  color: #fff;
}

/* ---------- Toast ---------- */
.toast{
  position: fixed; right: 16px; bottom: 16px;
  border-radius: 12px; padding: 10px 14px;
  background: var(--panel); border:1px solid var(--line);
  box-shadow: var(--shadow); z-index: 60;
  font-weight: 700;
}
.toast.ok{ border-color: rgba(34,197,94,.4); color: var(--text); }
.toast.warn{ border-color: rgba(239,68,68,.4); color: var(--text); }

/* small tweak so row actions look balanced */
.actions .icon-btn { width: 36px; height: 36px; }
